<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Вопрос Владыке</title>
    
    <link rel="icon" type="image/png" href="./icon.png">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* --- 1. ЕДИНАЯ ПАЛИТРА --- */
        :root {
            --bg-color: #121212;
            --text-color: #e0e0e0;
            --text-muted: #a0a0a0;
            --card-bg: #1e1e1e;
            
            --accent-primary: #3F98F7;
            --accent-secondary: #2563eb;
            
            --cursor-color: #3F98F7;
            --danger-color: #ef4444;
            
            --header-bg: rgba(18, 18, 18, 0.8); 
            --border-color: rgba(255, 255, 255, 0.1);
            --control-bg: rgba(255, 255, 255, 0.08); 
            --slider-track: rgba(255, 255, 255, 0.2);
            --shadow: 0 8px 20px rgba(0, 0, 0, 0.6);
            --transition-speed: 0.3s;
        }

        body.light-theme {
            --bg-color: #f0f2f5;
            --text-color: #1a202c; 
            --text-muted: #4a5568;
            --card-bg: #ffffff;
            --header-bg: rgba(255, 255, 255, 0.8);
            --border-color: rgba(0, 0, 0, 0.1);
            --control-bg: rgba(0, 0, 0, 0.06); 
            --slider-track: rgba(0, 0, 0, 0.15);
            --shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        /* --- ВЫДЕЛЕНИЕ --- */
        ::selection { background-color: var(--accent-primary); color: #ffffff; text-shadow: none; }
        ::-moz-selection { background-color: var(--accent-primary); color: #ffffff; text-shadow: none; }

        /* --- СНЕГ --- */
        .snowflake { position: fixed; top: -10px; z-index: 9998; color: #fff; user-select: none; pointer-events: none; animation: fall linear forwards; }
        body.light-theme .snowflake { color: #89CFF0; }
        @keyframes fall { to { transform: translateY(105vh); } }

        /* --- RESET --- */
        * {
            box-sizing: border-box;
            transition: background-color var(--transition-speed), 
                        color var(--transition-speed), 
                        border-color var(--transition-speed),
                        box-shadow var(--transition-speed);
            cursor: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            margin: 0;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* --- CURSOR (PC ONLY) --- */
        .cursor-dot, .cursor-outline {
            position: fixed; top: 0; left: 0; transform: translate(-50%, -50%);
            border-radius: 50%; z-index: 9999; pointer-events: none;
        }
        .cursor-dot { width: 8px; height: 8px; background-color: var(--cursor-color); }
        .cursor-outline {
            width: 40px; height: 40px; border: 2px solid var(--cursor-color);
            transition: width 0.2s, height 0.2s, background-color 0.2s;
        }
        body:hover .cursor-outline.hovered { width: 60px; height: 60px; background: rgba(63, 152, 247, 0.15); border-color: transparent; }

        /* --- HEADER --- */
        header {
            position: fixed; top: 0; width: 100%; height: 70px;
            padding: 0 2rem; background-color: var(--header-bg);
            backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
            display: flex; justify-content: space-between; align-items: center;
            z-index: 1000; border-bottom: 1px solid var(--border-color);
        }
        .header-left { display: flex; align-items: center; gap: 15px; }
        .logo { font-weight: 900; font-size: 1.5rem; color: var(--accent-primary); text-transform: uppercase; letter-spacing: 2px; white-space: nowrap; }
        .back-btn { 
            color: var(--text-color); text-decoration: none; font-size: 1.2rem; 
            width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center;
            transition: transform 0.2s;
        }
        .back-btn:hover { background: var(--control-bg); color: var(--accent-primary); transform: scale(1.1); }

        .controls { display: flex; align-items: center; gap: 15px; }
        .audio-group { display: flex; align-items: center; gap: 12px; background: var(--control-bg); padding: 6px 16px; border-radius: 50px; border: 1px solid var(--border-color); }
        .icon-btn { background: none; border: none; color: var(--accent-primary); font-size: 1.1rem; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        input[type=range] { -webkit-appearance: none; width: 80px; height: 4px; background: var(--slider-track); border-radius: 2px; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; width: 14px; height: 14px; border-radius: 50%; background: var(--accent-primary); }
        .theme-btn { background: var(--control-bg); border: 1px solid var(--border-color); color: var(--text-color); width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; flex-shrink: 0;}

        /* --- CONTAINER --- */
        .container {
            width: 100%; min-height: 100vh;
            padding-top: 70px; padding-bottom: 40px;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }

        /* --- MAGIC ORB --- */
        .orb-container {
            width: 300px; height: 300px; position: relative;
            display: flex; justify-content: center; align-items: center;
            cursor: pointer; animation: float 6s ease-in-out infinite; margin-bottom: 30px;
        }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }

        .orb {
            width: 100%; height: 100%; border-radius: 50%; overflow: hidden;
            border: 4px solid var(--accent-primary); box-shadow: 0 0 60px rgba(63, 152, 247, 0.3);
            position: relative; z-index: 10; transition: all 0.5s; background: #000;
        }
        .orb img { width: 100%; height: 100%; object-fit: cover; display: block; transition: transform 0.5s; }
        .orb:hover { box-shadow: 0 0 90px rgba(63, 152, 247, 0.6); transform: scale(1.02); }
        .orb.shaking { animation: shakeOrb 0.5s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shakeOrb { 10%, 90% { transform: translate3d(-2px, 0, 0); } 20%, 80% { transform: translate3d(4px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-6px, 0, 0); } 40%, 60% { transform: translate3d(6px, 0, 0); } }

        .orb-inner {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            border-radius: 50%; display: flex; justify-content: center; align-items: center;
            color: #fff; font-size: 5rem; z-index: 20; opacity: 0; pointer-events: none;
            background: rgba(0,0,0,0.6); transition: opacity 0.3s, background 0.3s, box-shadow 0.3s;
        }
        .orb-inner.visible { opacity: 1; }

        /* --- TEXT --- */
        .prediction-box {
            min-height: 80px; display: flex; justify-content: center; align-items: center;
            text-align: center; max-width: 600px; padding: 0 20px;
        }
        .prediction-text {
            font-size: 1.4rem; font-weight: 600; color: var(--accent-primary);
            opacity: 0.6; transform: translateY(10px); transition: all 0.5s ease-out;
        }
        .prediction-text.show { opacity: 1; transform: translateY(0); color: var(--text-color); }
        .prediction-text.toxic { color: var(--danger-color); }

        /* --- BUTTON --- */
        .cta-btn {
            background: transparent;
            border: 2px solid var(--accent-primary);
            color: var(--accent-primary);
            padding: 15px 40px; border-radius: 50px; font-weight: bold; font-size: 1rem;
            margin-top: 40px; cursor: pointer; display: flex; align-items: center; gap: 10px;
            transition: all 0.3s;
        }
        .cta-btn:hover { background: var(--accent-primary); color: #fff; box-shadow: 0 0 20px rgba(63, 152, 247, 0.4); transform: translateY(-3px); }
        .cta-btn:active { transform: scale(0.95); }

        /* --- FOOTER --- */
        footer { position: fixed; bottom: 0; width: 100%; padding: 1rem; color: var(--text-muted); font-size: 0.8rem; text-align: center; pointer-events: none; }

        /* Mobile */
        @media (max-width: 768px) {
            * { cursor: auto !important; } .cursor-dot, .cursor-outline { display: none !important; }
            header { padding: 0 1rem; }
            .logo { font-size: 1.2rem; } .controls { gap: 10px; }
            input[type=range] { display: none; } .audio-group { padding: 6px 12px; }
            .orb-container { width: 250px; height: 250px; }
            .prediction-text { font-size: 1.2rem; }
        }
    </style>
</head>
<body>

    <audio id="bgMusic" loop>
        <source src="./song_winter.mp3" type="audio/mpeg">
    </audio>

    <div class="cursor-dot"></div>
    <div class="cursor-outline"></div>

    <header>
        <div class="header-left">
            <a href="index.html" class="back-btn" title="На главную"><i class="fas fa-arrow-left"></i></a>
            <div class="logo">ОРАКУЛ</div>
        </div>
        
        <div class="controls">
            <div class="audio-group">
                <button class="icon-btn" id="musicToggle" title="Музыка">
                    <i class="fas fa-play"></i>
                </button>
                <input type="range" id="volumeSlider" min="0" max="1" step="0.05" value="0.5">
            </div>
            
            <button class="theme-btn" id="themeToggle"><i class="fas fa-moon"></i></button>
        </div>
    </header>

    <div class="container">
        
        <div class="orb-container" onclick="getPrediction()">
            <div class="orb" id="magicOrb">
                <img src="./oracle.jpg" alt="Шар судьбы">
                <div class="orb-inner" id="orbInner"><i class="fas fa-star"></i></div>
            </div>
        </div>

        <div class="prediction-box">
            <div id="predictionText" class="prediction-text">
                Коснись сферы, чтобы узнать судьбу...
            </div>
        </div>

        <button class="cta-btn" onclick="getPrediction()">
            <i class="fas fa-magic"></i> ПОЛУЧИТЬ ОТВЕТ
        </button>

    </div>

    <footer>Shchekster Oracle | Controls Your Life</footer>

    <script>
        // --- 1. ПОЗИТИВНЫЙ СПИСОК (GOOD) ---
        const good = {
            time: [
                "Сегодня", "Завтра", "В полночь", "На днях", "В 2025 году", 
                "Прямо сейчас", "Через час", "Когда выспишься", "В ближайшие дни", 
                "Утром", "В течение недели", "В выходной", "К вечеру", 
                "В этом месяце", "После хорошего сна", "Перед важным делом", 
                "В спокойный вечер", "Когда будешь готов", "После отдыха"
            ],
            event: [
                "тебя ждёт приятная новость", "ты найдёшь удачное решение", "появится вдохновляющая идея",
                "кто-то поддержит тебя", "произойдёт тёплая встреча", "ты неожиданно поймёшь важную вещь",
                "удача окажется рядом", "ты сделаешь правильный шаг", "обстоятельства сложатся в твою пользу",
                "ты получишь полезный совет", "ты почувствуешь уверенность", "тебя заметят и оценят",
                "ты найдёшь то, что искал", "появится новая возможность", "ты спокойно справишься с задачей",
                "тебя ждет успех", "найдешь деньги", "встретишь кота", "придет гениальная идея",
                "тебя ждет приятная встреча", "тебя ждёт приятное сообщение", "ты примешь удачное решение",
                "у тебя появится вдохновение", "тебя посетит умная мысль", "ты получишь важный совет"
            ],
            outcome: [
                "это принесёт радость", "ты почувствуешь облегчение", "всё пройдёт успешно",
                "день сложится хорошо", "ты будешь доволен собой", "жизнь станет проще",
                "это даст тебе силы", "ты почувствуешь внутренний баланс", "настроение заметно улучшится",
                "ты станешь увереннее", "это приблизит тебя к цели", "ты ощутишь спокойствие",
                "всё пойдёт как надо", "ты увидишь смысл происходящего", "это станет хорошим началом",
                "и это судьба.", "будь готов.", "не упусти!", "мяу!", "звезды решили так.", 
                "горжусь тобой!", "Щёкстер доволен.", "молодец.", "да, такое тоже бывает!"
            ],
            specials: [
                "Ты сегодня в потоке.", "Вселенная на твоей стороне.", "Это был правильный выбор.",
                "Ты реально красавчик.", "Удача уже выехала к тебе.", "Ты сделал всё как надо.",
                "Скоро станет понятно, зачем всё это было.", "Ты лучше, чем сам о себе думаешь.",
                "Сегодня тебе можно всё.", "Звёзды сказали: да.", "Это твой момент.",
                "Ты прошёл сложный уровень.", "Система на твоей стороне.", "Жизнь ставит лайк.",
                "Ты словил нужный вайб.", "Всё идёт по плану, даже если кажется иначе.",
                "Ты в нужном таймлайне.", "Скоро будет приятно.", "Это начало чего-то хорошего.",
                "Ты сделал максимум — этого достаточно.", "Сегодня ты главный герой.",
                "Реальность подстраивается под тебя.", "Ты всё понял правильно.",
                "Тебе повезёт без причины.", "Это редкий удачный день.", "Ты заслужил этот результат.",
                "Скоро придёт хорошая новость.", "Ты идёшь быстрее, чем думаешь.",
                "Вселенная подмигнула.", "Это было не зря.", "Ты на правильной стороне истории.",
                "Сегодня всё сложится.", "Ты приятно удивишься.", "Это твой знак.",
                "Сейчас — удачное время.", "Ты всё делаешь правильно.", "Будет легче, чем ожидалось.",
                "Ты в плюсе.", "Это хороший исход.", "Дальше — лучше."
            ]
        };

        // --- 2. НЕГАТИВНЫЙ СПИСОК (BAD/TOXIC) ---
        const bad = {
            time: [
                "В худший день", "Когда забудешь телефон", "В момент сомнений", 
                "Когда рак на горе свистнет", "В понедельник утром",
                "Когда ты расслабишься"
            ],
            event: [
                "наступишь в лужу", "отрубится интернет", "опоздаешь везде", 
                "все будут смеяться", "тебя уволят", "наберешь вес", 
                "кот нассыт в тапки", "потеряешь ключи", "сломаешь ноготь",
                "уронишь телефон экраном вниз", "прольешь кофе на штаны"
            ],
            outcome: [
                "и ты будешь плакать.", "лошара.", "смирись.", "жизнь боль.", 
                "так тебе и надо.", "это фиаско, братан.", "ну и поделом.",
                "никто не поможет.", "готовься к худшему.", "ха-ха-ха."
            ],
            specials: [
                "Ты выглядишь ужасно.", "Твой IQ как у хлебушка.", "Удачи не будет.", 
                "Пустота впереди.", "Никто тебя не любит.", "42. Но это не поможет.", 
                "Покорми кота или умрешь.", "Не ешь желтый снег, это не сок...", 
                "Найди работу.", "Аура как у помойки.", "Нет, ты не глупенький. Ты просто реально тупой", 
                "Бро, ты умрёшь и т.д.", "Надо построить ЭЭЭЭЭ короч огромный лоток.",
                "Завтра будет хуже, чем сегодня.", "Твои мечты — это просто галлюцинации."
            ]
        };

        // --- ГЛАВНАЯ ФУНКЦИЯ ГЕНЕРАЦИИ ---
        function getPredictionData() {
            // Шанс 30% на плохое предсказание
            const isBad = Math.random() < 0.3;
            
            // Выбираем соответствующий словарь
            const source = isBad ? bad : good;
            let text = "";

            // Шанс 50% на "специальную фразу" (готовую), иначе собираем из частей
            if (Math.random() < 0.5) {
                text = source.specials[Math.floor(Math.random() * source.specials.length)];
            } else {
                const t = source.time[Math.floor(Math.random() * source.time.length)];
                const e = source.event[Math.floor(Math.random() * source.event.length)];
                const o = source.outcome[Math.floor(Math.random() * source.outcome.length)];
                text = `${t} ${e}, ${o}`;
            }

            return { text, isBad };
        }

        // --- UI ФУНКЦИЯ ---
        function getPrediction() {
            const orb = document.getElementById('magicOrb');
            const inner = document.getElementById('orbInner');
            const text = document.getElementById('predictionText');

            text.classList.remove('show', 'toxic');
            inner.classList.remove('visible');
            orb.classList.add('shaking');
            
            // Сброс цветов
            orb.style.borderColor = "#3F98F7";
            orb.style.boxShadow = "0 0 60px rgba(63, 152, 247, 0.3)";

            // Генерируем данные
            const result = getPredictionData();

            setTimeout(() => {
                orb.classList.remove('shaking');
                text.innerText = result.text;
                text.classList.add('show');
                
                if (result.isBad) {
                    // --- КРАСНЫЙ РЕЖИМ (TOXIC) ---
                    inner.innerHTML = '<i class="fas fa-star"></i>'; 
                    inner.style.color = '#ef4444';
                    text.classList.add('toxic');   
                    
                    orb.style.borderColor = "#ef4444";
                    orb.style.boxShadow = "0 0 80px rgba(239, 68, 68, 0.8)";
                    inner.style.background = 'rgba(239, 68, 68, 0.7)';
                    inner.style.boxShadow = '0 0 40px rgba(239, 68, 68, 0.6)';
                } else {
                    // --- СИНИЙ РЕЖИМ (GOOD) ---
                    inner.innerHTML = '<i class="fas fa-star"></i>';
                    inner.style.color = '#fff';
                    
                    orb.style.borderColor = "#3F98F7";
                    orb.style.boxShadow = "0 0 80px rgba(63, 152, 247, 0.8)";
                    inner.style.background = 'rgba(0, 0, 0, 0.5)';
                    inner.style.boxShadow = 'none';
                }
                
                inner.classList.add('visible');
                if (navigator.vibrate) navigator.vibrate(100);
            }, 500);
        }

        // --- SNOW ---
        function createSnowflake() {
            const snowflake = document.createElement('div');
            snowflake.classList.add('snowflake');
            snowflake.innerHTML = '❄';
            snowflake.style.left = Math.random() * 100 + 'vw';
            snowflake.style.opacity = Math.random();
            snowflake.style.fontSize = Math.random() * 15 + 10 + 'px';
            snowflake.style.animationDuration = Math.random() * 3 + 3 + 's';
            document.body.appendChild(snowflake);
            setTimeout(() => { snowflake.remove(); }, 6000);
        }
        setInterval(createSnowflake, 200);

        // --- UI & THEME ---
        const cursorDot = document.querySelector('.cursor-dot');
        const cursorOutline = document.querySelector('.cursor-outline');
        if (!window.matchMedia("(hover: none)").matches) {
            window.addEventListener('mousemove', (e) => {
                cursorDot.style.left = `${e.clientX}px`; cursorDot.style.top = `${e.clientY}px`;
                cursorOutline.animate({ left: `${e.clientX}px`, top: `${e.clientY}px` }, { duration: 500, fill: "forwards" });
            });
            document.querySelectorAll('a, button, .orb').forEach(el => {
                el.addEventListener('mouseenter', () => cursorOutline.classList.add('hovered'));
                el.addEventListener('mouseleave', () => cursorOutline.classList.remove('hovered'));
            });
        }

        const themeToggle = document.getElementById('themeToggle');
        if (localStorage.getItem('theme') === 'light') {
            document.body.classList.add('light-theme');
            themeToggle.querySelector('i').className = 'fas fa-sun';
        }
        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('light-theme');
            const isLight = document.body.classList.contains('light-theme');
            themeToggle.querySelector('i').className = isLight ? 'fas fa-sun' : 'fas fa-moon';
            localStorage.setItem('theme', isLight ? 'light' : 'dark');
        });

        // --- MUSIC ---
        const musicBtn = document.getElementById('musicToggle');
        const audio = document.getElementById('bgMusic');
        const volSlider = document.getElementById('volumeSlider');
        audio.volume = 0.5;

        musicBtn.addEventListener('click', () => {
            if (audio.paused) { 
                audio.play().catch(e => alert("Взаимодействие со страницей необходимо")); 
                musicBtn.querySelector('i').className = 'fas fa-pause'; 
            } else { 
                audio.pause(); 
                musicBtn.querySelector('i').className = 'fas fa-play'; 
            }
        });
        
        volSlider.addEventListener('input', (e) => {
            audio.volume = e.target.value;
        });
    </script>
</body>
</html>
